{% extends "base.html" %}

{% block title %}
My Books - Booklogger
{% endblock %}

{% block content %}
<h2>My Books</h2>

{% if logs %}
  <h3>Your Books:</h3>
  {% for log in logs %}

    <div class="log-entry preserve-whitespace">
      <img src="/cover/{{ log.id }}" alt="Book cover image" class="small-cover">
      <p><strong><a href="/log/{{ log.id }}">{{ log.title }}</a></strong> by {{ log.author }}</p>
      <p>
        Status: {{ log.status }}
        <br/> 
        {% if log.rating %}
          Rated: {{ log.rating }}/10
        {% endif %}
        {% if log.review %}
          <p class="review">
            <strong>Review:</strong> {{ log.review[:200] }}
            {% if log.review|length > 200 %}
              ...<br/>
              <a href="/log/{{ log.id }}">Read more</a>
            {% endif %}
          </p>
        {% endif %}

        <a href="/edit/{{ log.id }}">Edit</a>
        <a href="/delete/{{ log.id }}">Delete</a>

      </p>
    </div>
  {% endfor %}
  <p class="page-nav">
    <a href="/my_books/{{ page - 1 }}">&lt;&lt;</a>
    &nbsp;&nbsp;Page {{ page }}/{{ page_count }}&nbsp;&nbsp;
    <a href="/my_books/{{ page + 1 }}">&gt;&gt;</a>
  </p>
{% else %}
  <p>You have no books logged yet. Start by <a href="/new_log">logging a book</a>.</p>
{% endif %}
{% endblock %}